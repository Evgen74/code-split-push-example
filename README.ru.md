# Code Split Push Example

Этот проект демонстрирует реализацию разделения кода и динамической загрузки бандлов в React Native с использованием Code Push. Он показывает, как разделить React Native приложение на несколько бандлов, которые можно загружать динамически во время выполнения.

## Возможности

- Разделение кода на несколько бандлов (Home, Profile, Settings)
- Динамическая загрузка бандлов
- Пользовательская конфигурация Metro бандлера
- MobX для управления состоянием
- React Navigation для маршрутизации

## Структура проекта

```
├── bundles/           # Разделенные бандлы (Home, Profile, Settings)
├── modules/          # Основные модули, включая реализацию code-push
├── src/             # Для unistyles
└── dist/           # Директория для сборки
```

## Установка

1. Клонируйте репозиторий
2. Установите зависимости:
```bash
yarn install
```

3. Для iOS установите pods:
```bash
cd ios && pod install && cd ..
```

## Дополнительные скрипты

- `yarn build` - Генерация разделенных бандлов
- `yarn start:server` - Запуск локального сервера для раздачи бандлов

## Генерация бандлов

Для генерации разделенных бандлов:
```bash
yarn build
```

Это создаст отдельные бандлы для разных частей приложения в директории `dist`.

## Технические детали

Для билда отдельных бандлов (не главного) исопльзуется кастомный конфиг - metro.bundle.config
Проект работает в production режиме по умолчанию. Если вы хотите попробовать технологию без сборки prod, то: на iOS вы можете закомментировать все блоки `#if !DEBUG` и запустить сборку iOS, затем изменить любой бандл (profile или settings или добавить еще один) и обязательно повысить версию пакета. Собрать бандлы с помощью `yarn build`, перезапустить приложение.

Большая часть логики code push написана на JS в пакете `modules/code-push/src`. В нативной части реализованы только: старт нужного бандла (берется home бандл зашитый в приложение) и дозагрузка других бандлов в моменте исполнения
